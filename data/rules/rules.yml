version: "3.1"

rules:
- rule: greetings
  steps:
    - intent: greet
    - action: utter_greet

- rule: ending conversation
  steps:
    - intent: thanks
    - action: utter_more

- rule: Activate diet_form
  steps:
    - or:
      - intent: ask_diet_plan
      - intent: lose_weight
      - intent: gain_weight
    - action: diet_form
    - active_loop: diet_form

- rule: Submit diet_form
  condition:
    - active_loop: diet_form
  steps:
    - action: diet_form
    - active_loop: null
    - slot_was_set:
        - requested_slot: null
    - action: action_utter_slot_values
    - action: action_generate_diet
