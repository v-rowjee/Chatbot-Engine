version: '3.1'
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
intents:
- greet
- affirm
- deny
- thanks
- ask_diet_plan
- lose_weight
- gain_weight
- maintain_weight
- inform_allergens
- inform_diet
- inform_no_diet
- inform_details
- inform_activity_level
- inform_no_allergens
entities:
- diet
- allergen
- height
- weight
- age
- gender
- activity_level
slots:
  goal:
    type: categorical
    values:
      - lose_weight
      - gain_weight
      - maintain_weight
    influence_conversation: true
    mappings:
    - type: from_intent
      intent: lose_weight
      value: lose_weight
    - type: from_intent
      intent: gain_weight
      value: gain_weight
    - type: from_intent
      intent: maintain_weight
      value: maintain_weight
  diet:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: diet
    - type: from_intent
      intent: inform_no_diet
      value: ""
    - type: from_intent
      intent: deny
      value: ""
  has_allergens:
    type: bool
    influence_conversation: true
    mappings:
    - type: from_intent
      intent: affirm
      value: true
      conditions:
        - active_loop: diet_form
          requested_slot: has_allergens
    - type: from_intent
      intent: deny
      value: false
      conditions:
        - active_loop: diet_form
          requested_slot: has_allergens
  allergens:
    type: list
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: allergen
      conditions:
        - active_loop: diet_form
          requested_slot: allergens
    - type: from_intent
      intent: inform_no_allergens
      value: []
  height:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: height
      conditions:
          - active_loop: diet_form
  weight:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: weight
      conditions:
        - active_loop: diet_form
  age:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: age
        conditions:
          - active_loop: diet_form
            requested_slot: height
          - active_loop: diet_form
            requested_slot: weight
          - active_loop: diet_form
            requested_slot: gender
          - active_loop: diet_form
            requested_slot: age
  gender:
    type: categorical
    values:
      - male
      - female
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: gender
        conditions:
          - active_loop: diet_form
            requested_slot: gender
  activity_level:
    type: float
    min_value: 1
    max_value: 5
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: activity_level
        conditions:
          - active_loop: diet_form
            requested_slot: activity_level
  confirm:
    type: bool
    influence_conversation: true
    mappings:
      - type: from_intent
        intent: affirm
        value: true
        conditions:
          - active_loop: diet_form
            requested_slot: confirm
forms:
  diet_form:
    required_slots:
    - goal
    - diet
    - has_allergens
    - allergens
    - height
    - weight
    - age
    - gender
    - activity_level
    - confirm
actions:
  - action_generate_diet
  - validate_diet_form
  - action_ask_height
  - action_ask_weight
  - action_ask_age
  - action_ask_gender
  - action_ask_confirm
responses:
  utter_default:
  - text: I'm sorry, I didn't quite understand that. Could you rephrase?
  utter_greet:
  - text: Hi, how can i help you?
    buttons:
    - payload: /ask_diet_plan
      title: Create a Meal Plan
  utter_more:
  - text: Is there anything else I can help you with?
    buttons:
    - payload: /ask_diet_plan
      title: Create another Meal Plan
  utter_ask_goal:
  - text: In terms of weight goals, are you primarily interested in weight loss, weight gain or maintaining your current weight?
    buttons:
      - payload: /lose_weight
        title: Lose weight
      - payload: /gain_weight
        title: Gain weight
      - payload: /maintain_weight
        title: Maintain weight
  - text: When it comes to weight management, are you aiming to lose weight, gain weight, or maintain your current weight?
    buttons:
    - payload: /lose_weight
      title: Lose weight
    - payload: /gain_weight
      title: Gain weight
    - payload: /maintain_weight
      title: Maintain weight
  utter_ask_diet:
  - text: What kind of diet are you looking for? (e.g. vegan, vegetarian, keto, etc.)
    buttons:
      - payload: /inform_no_diet
        title: I don't have a specific diet
  - text: What specific type of diet are you interested in following? For example, are you considering a vegan, vegetarian, keto, or any other specific type of diet?
    buttons:
      - payload: /inform_no_diet
        title: I don't have a specific diet
  utter_ask_has_allergens:
  - text: Do you have any allergies?
    buttons:
      - payload: /affirm
        title: Yes
      - payload: /deny
        title: No
  utter_ask_allergens:
  - text: Could you please provide me with a list of any food allergies or intolerances you have?
  - text: Could you please specify which foods or ingredients you are allergic to?
  - text: To ensure your safety and well-being, could you please provide more details about the specific foods or ingredients you are allergic to?
  utter_ask_activity_level:
  - text: Rate your activity level on a scale of 1 to 5. (1 being sedentary and 5 being very active)
  - text: On a scale of 1 to 5, with 1 being sedentary and 5 being very active, how would you rate your current level of physical activity?
  - text: To better understand your current physical activity level, please rate it on a scale of 1 to 5, where 1 signifies a sedentary lifestyle and 5 signifies a highly active lifestyle.
